{"version":3,"file":"main.0f9ec88ce7d16a531912.hot-update.js","sources":["webpack:///./src/p2/forms/ConfirmationForm.js"],"sourcesContent":["/** @jsx jsx */\nimport PropTypes from 'prop-types'\nimport React, { useState } from 'react'\nimport { css, jsx } from '@emotion/core'\nimport { ApolloConsumer, Mutation } from 'react-apollo'\nimport { Trans } from '@lingui/macro'\nimport { Form, Field } from 'react-final-form'\nimport { Container } from '../../components/container'\nimport { TextArea } from '../../components/text-area'\nimport { Button } from '../../components/button'\nimport { Link } from '../../components/link'\nimport { Text } from '../../components/text'\nimport { H2 } from '../../components/header'\nimport { finalFormAdapter } from '../../utils/finalFormAdapter'\nimport {\n  getTellUsMore,\n  SUBMIT_P2_REPORT_MUTATION,\n} from '../../utils/queriesAndMutations'\n\nconst TextAreaAdapter = finalFormAdapter(TextArea)\n\nexport const ConfirmationForm = props => {\n  const [tellUsMore, setTellUsMore] = useState('')\n\n  const onChange = (e, client) => {\n    setTellUsMore(e.target.value)\n    client.writeData({\n      data: { tellUsMore: JSON.stringify({ tellUsMore: e.target.value }) },\n    })\n  }\n\n  return (\n    <React.Fragment>\n      <H2 marginTop={[4, null, 5]}>\n        <Trans>Tell us more</Trans>\n      </H2>\n      <ApolloConsumer>\n        {client => (\n          <Mutation mutation={SUBMIT_P2_REPORT_MUTATION}>\n            {submitReportP2 => (\n              <Form\n                initialValues={getTellUsMore(client)}\n                onSubmit={() => props.onSubmit(client, submitReportP2)}\n                render={({ handleSubmit }) => (\n                  <form onSubmit={handleSubmit}>\n                    <label htmlFor=\"tellUsMore\">\n                      <Text\n                        marginTop={[1, null, 2]}\n                        marginBottom={[1, null, 2]}\n                      >\n                        <Trans>\n                          The more detail you can give, the more police will\n                          have to go on.\n                        </Trans>\n                      </Text>\n                    </label>\n                    <div>\n                      <Field\n                        input={{\n                          value: tellUsMore\n                            ? tellUsMore\n                            : getTellUsMore(client).tellUsMore,\n                          onChange: e => onChange(e, client),\n                        }}\n                        name=\"tellUsMore\"\n                        id=\"tellUsMore\"\n                        component={TextAreaAdapter}\n                        height=\"200px\"\n                      />\n                    </div>\n\n                    <Container\n                      width=\"305px\"\n                      marginTop={[1, null, 1]}\n                      css={css`\n                        display: flex;\n                        flex-direction: column;\n                        justify-content: space-between;\n                      `}\n                    >\n                      <Button type=\"submit\">\n                        <Trans>Submit report</Trans>\n                      </Button>\n                    </Container>\n\n                    <Container\n                      width=\"300px\"\n                      marginTop={[1, null, 1]}\n                      css={css`\n                        display: flex;\n                        flex-direction: column;\n                        justify-content: space-between;\n                      `}\n                    >\n                      <Link\n                        type=\"button\"\n                        color=\"black\"\n                        to=\"/p2\"\n                        textAlign=\"center\"\n                      >\n                        <Trans>Cancel report</Trans>\n                      </Link>\n                    </Container>\n                  </form>\n                )}\n              />\n            )}\n          </Mutation>\n        )}\n      </ApolloConsumer>\n    </React.Fragment>\n  )\n}\n\nConfirmationForm.propTypes = {\n  onSubmit: PropTypes.func.isRequired,\n}\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAKA;AACA;;;;;;;;;;;;;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AAEA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AADA;AAGA;AACA;AACA;AAEA;AAAA;AACA;AAAA;AAGA;AACA;AAAA;AACA;AAEA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AACA;AAAA;AAEA;AACA;AAFA;AAIA;AAAA;AAQA;AACA;AAGA;AAAA;AAAA;AAJA;AAMA;AACA;AACA;AACA;AAVA;AAeA;AACA;AACA;AAHA;AASA;AAAA;AACA;AAAA;AAKA;AACA;AACA;AAHA;AAUA;AACA;AACA;AACA;AAJA;AAMA;AAAA;AAzDA;AAHA;AADA;AAFA;AA2EA;AAEA;AACA;AADA;;;;A","sourceRoot":""}