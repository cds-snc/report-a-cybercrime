{"version":3,"file":"main.ee671f2b70a835754202.hot-update.js","sources":["webpack:///./src/p2/forms/ConfirmationForm.js"],"sourcesContent":["/** @jsx jsx */\nimport PropTypes from 'prop-types'\nimport React, { useState } from 'react'\nimport { jsx } from '@emotion/core'\nimport { ApolloConsumer, Mutation } from 'react-apollo'\nimport { Trans } from '@lingui/macro'\nimport { Form, Field } from 'react-final-form'\nimport { ButtonsContainer } from '../../components/buttons-container'\nimport { TextArea } from '../../components/text-area'\nimport { Text } from '../../components/text'\nimport { finalFormAdapter } from '../../utils/finalFormAdapter'\nimport {\n  getTellUsMore,\n  SUBMIT_P2_REPORT_MUTATION,\n} from '../../utils/queriesAndMutations'\n\nconst TextAreaAdapter = finalFormAdapter(TextArea)\n\nexport const ConfirmationForm = props => {\n  const [tellUsMore, setTellUsMore] = useState('')\n\n  const onChange = (e, client) => {\n    setTellUsMore(e.target.value)\n    client.writeData({\n      data: { tellUsMore: JSON.stringify({ tellUsMore: e.target.value }) },\n    })\n  }\n\n  return (\n    <React.Fragment>\n      <hr />\n      <br></br>\n      <Text marginTop={[5, null, 6]}>\n        <Trans>Tell us more</Trans>\n      </Text>\n      <ApolloConsumer>\n        {client => (\n          <Mutation mutation={SUBMIT_P2_REPORT_MUTATION}>\n            {submitReportP2 => (\n              <Form\n                initialValues={getTellUsMore(client)}\n                onSubmit={() => props.onSubmit(client, submitReportP2)}\n                render={({ handleSubmit }) => (\n                  <form onSubmit={handleSubmit}>\n                    <label htmlFor=\"tellUsMore\">\n                    <Text fontSize={1, null, 2}>\n                        <Trans>\n                          Is there any information you'd like to add that didn't\n                          fit elsewhere?\n                        </Trans>\n                      </Text>\n                    </label>\n                    <div>\n                      <Field\n                        input={{\n                          value: tellUsMore\n                            ? tellUsMore\n                            : getTellUsMore(client).tellUsMore,\n                          onChange: e => onChange(e, client),\n                        }}\n                        name=\"tellUsMore\"\n                        id=\"tellUsMore\"\n                        component={TextAreaAdapter}\n                        height=\"75px\"\n                      />\n                    </div>\n\n                    <ButtonsContainer\n                      buttonLink={false}\n                      cancel={true}\n                      submit={true}\n                    />\n                  </form>\n                )}\n              />\n            )}\n          </Mutation>\n        )}\n      </ApolloConsumer>\n    </React.Fragment>\n  )\n}\n\nConfirmationForm.propTypes = {\n  onSubmit: PropTypes.func.isRequired,\n}\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAKA;AAEA;AAAA;AAAA;AAAA;AAAA;AACA;AAEA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AADA;AAGA;AACA;AACA;AAIA;AAAA;AACA;AAAA;AAGA;AACA;AAAA;AACA;AAEA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AACA;AAAA;AACA;AAAA;AACA;AAAA;AAQA;AACA;AAGA;AAAA;AAAA;AAJA;AAMA;AACA;AACA;AACA;AAVA;AAeA;AACA;AACA;AAHA;AAzBA;AAHA;AADA;AAFA;AA6CA;AAEA;AACA;AADA;;;;A","sourceRoot":""}