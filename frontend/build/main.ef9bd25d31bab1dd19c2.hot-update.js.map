{"version":3,"file":"main.ef9bd25d31bab1dd19c2.hot-update.js","sources":["webpack:///./src/p2/ConfirmationPage.js"],"sourcesContent":["/** @jsx jsx */\nimport { jsx } from '@emotion/core'\nimport { navigate } from '@reach/router'\nimport { Trans } from '@lingui/macro'\nimport { H1 } from '../components/header'\nimport { TrackPageViews } from '../TrackPageViews'\nimport { Steps } from '../components/stepper'\nimport { Layout } from '../components/layout'\nimport {\n  getTimeFrame,\n  getWhatHappened,\n  getScammerDetails,\n  getTellUsMore,\n  getImpact,\n  getP2ContactInfo,\n} from '../utils/queriesAndMutations'\nimport { ConfirmationSummary } from './ConfirmationSummary'\nimport { ConfirmationForm } from './forms/ConfirmationForm'\nimport { BackButton } from '../components/backbutton'\n\nconst randLetter = () => {\n  const letters = 'abcdefghijklmnopqrstuvwxyz'.split('')\n  return letters[Math.floor(Math.random() * letters.length)]\n}\nconst randDigit = () => Math.floor(Math.random() * 10)\n\nconst randomizeString = s =>\n  s\n    ? s\n        .replace(/[a-z]/g, () => randLetter())\n        .replace(/[A-Z]/g, () => randLetter().toUpperCase())\n        .replace(/[0-9]/g, () => randDigit())\n    : s\n\nconst submit = (client, submitReportP2) => {\n  let timeFrame = getTimeFrame(client)\n  let whatHappened = getWhatHappened(client)\n  let scammerDetails = getScammerDetails(client)\n  let impact = getImpact(client)\n  let p2ContactInfo = getP2ContactInfo(client)\n  let tellUsMore = getTellUsMore(client)\n\n  let { fullName, email, phone, postalCode } = p2ContactInfo\n  fullName = randomizeString(fullName)\n  email = randomizeString(email)\n  phone = randomizeString(phone)\n  postalCode = randomizeString(postalCode)\n\n  const data = {\n    source: 'p2',\n    timeFrame,\n    whatHappened,\n    impact,\n    scammerDetails,\n    contactInfo: {\n      fullName,\n      email,\n      phone,\n      postalCode,\n    },\n    tellUsMore,\n  }\n  submitReportP2({ variables: data }) // currently fails, need new mutation\n  navigate('nextsteps')\n}\n\nexport const ConfirmationPage = () => {\n  return (\n    <Layout>\n      <TrackPageViews />\n      <BackButton route=\"/p2/contactinfo\">\n        <Trans>contact information</Trans>\n      </BackButton>\n      <Steps activeStep={6} totalSteps={6} />\n      <H1>\n        <Trans>Review your report</Trans>\n      </H1>\n      <ConfirmationSummary />\n      <ConfirmationForm onSubmit={submit} />\n    </Layout>\n  )\n}\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AAQA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AACA;AAAA;AAGA;AAAA;AACA;AAAA;AACA;AAAA;AALA;AACA;AAOA;AACA;AACA;AACA;AACA;AACA;AACA;AANA;AAAA;AAAA;AAAA;AASA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAJA;AAMA;AAZA;AAcA;AAAA;AAAA;AACA;AAAA;AACA;AACA;AACA;AACA;AAGA;AAAA;AACA;AAAA;AAEA;AAAA;AAAA;AAEA;AAAA;AAGA;AAAA;AAGA;;;;A","sourceRoot":""}