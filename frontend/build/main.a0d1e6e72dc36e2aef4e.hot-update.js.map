{"version":3,"file":"main.a0d1e6e72dc36e2aef4e.hot-update.js","sources":["webpack:///./src/FileUploadPage.js"],"sourcesContent":["/**@jsx jsx */\nimport { jsx, css } from '@emotion/core'\nimport { Component } from 'react'\nimport { navigate } from '@reach/router'\nimport { Trans } from '@lingui/macro'\nimport { ApolloConsumer } from 'react-apollo'\nimport { Container } from './components/container'\nimport { Text } from './components/text'\nimport { H1, H2 } from './components/header'\nimport { Button } from './components/button'\nimport { Link } from './components/link'\nimport { FileUpload } from './components/file-upload'\nimport { TrackPageViews } from './TrackPageViews'\nimport { Layout } from './components/layout'\n\nimport { Steps } from './components/stepper'\n\nconst topBarContainer = css`\n  display: flex;\n  width: 90%;\n  flex-direction: row;\n  margin-bottom: 20px;\n`\n\nimport { P } from './components/paragraph'\n\nexport class FileUploadPage extends Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      files: [],\n    }\n  }\n\n  onChange = e => {\n    this.setState({ files: this.state.files.concat(e.target.files[0]) })\n  }\n\n  removeFile = index => {\n    let newFiles = this.state.files\n    newFiles.splice(index, 1)\n    this.setState({ files: newFiles })\n  }\n\n  submitAndNavigate = client => {\n    const files = this.state.files.map(file => file.name)\n    const data = { files }\n    client.writeData({ data }) // TODO: actually upload files\n    navigate('/contactinfoquestion')\n  }\n\n  render() {\n    const { files } = this.state\n\n    return (\n      <Layout>\n        <TrackPageViews />\n        <Container css={topBarContainer}>\n          <Steps activeStep={3} />\n        </Container>\n        <H1 marginBottom=\"70px\">\n          <Trans>Attach supporting files</Trans>\n        </H1>\n        <P>\n          <Trans>\n            {' '}\n            Supporting files could include copies of emails, text messages, and\n            receipts. Any documentation could serve as evidence for police.\n          </Trans>\n        </P>\n        <Container\n          width=\"300px\"\n          marginTop={[2, null, 5]}\n          marginBottom={[2, null, 5]}\n          css={css`\n            display: flex;\n            flex-direction: row;\n            justify-content: center;\n          `}\n        >\n          <FileUpload\n            onChange={this.onChange}\n            paddingLeft=\"15px\"\n            paddingRight=\"15px\"\n          >\n            <Trans>Attach file</Trans>\n          </FileUpload>\n        </Container>\n        <hr />\n\n        <H2 fontSize={[3, null, 5]}>\n          {files.length} <Trans>files attached</Trans>\n        </H2>\n\n        <Container>\n          {files.map((f, index) => (\n            <Container\n              width=\"300px\"\n              marginBottom={[2, null, 3]}\n              key={index}\n              css={css`\n                display: flex;\n                flex-direction: row;\n                justify-content: space-between;\n              `}\n            >\n              <Text>{f.name}</Text>\n              <Button\n                float=\"right\"\n                marginTop={0}\n                backgroundColor=\"crimson\"\n                type=\"button\"\n                onClick={() => this.removeFile(index)}\n              >\n                <Trans>Remove file</Trans>\n              </Button>\n            </Container>\n          ))}\n        </Container>\n\n        <ApolloConsumer>\n          {client => (\n            <Container>\n              <Container\n                width=\"300px\"\n                marginTop={[7, null, 8]}\n                css={css`\n                  display: flex;\n                  flex-direction: column;\n                  justify-content: space-between;\n                `}\n              >\n                <Button onClick={() => this.submitAndNavigate(client)}>\n                  <Trans>Continue</Trans>\n                </Button>\n              </Container>\n\n              <Container\n                width=\"300px\"\n                marginTop={[2, null, 3]}\n                css={css`\n                  display: flex;\n                  flex-direction: column;\n                  justify-content: space-between;\n                `}\n              >\n                <Link type=\"button\" color=\"black\" to=\"/\" textAlign=\"center\">\n                  <Trans>Cancel report</Trans>\n                </Link>\n              </Container>\n            </Container>\n          )}\n        </ApolloConsumer>\n      </Layout>\n    )\n  }\n}\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AAEA;AAAA;AAAA;AAAA;AAAA;AAOA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;AACA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AADA;AACA;AAAA;AACA;AAFA;AAQA;AAAA;AAAA;AACA;AACA;AAVA;AAYA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AACA;AAhBA;AAkBA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AACA;AACA;AArBA;AACA;AADA;AAFA;AAKA;AACA;AAPA;AAAA;AAAA;AAyBA;AACA;AADA;AAGA;AAGA;AAAA;AACA;AAAA;AAEA;AAAA;AACA;AAAA;AAGA;AAAA;AAOA;AACA;AACA;AACA;AAJA;AAWA;AACA;AACA;AAHA;AAKA;AAAA;AAKA;AAAA;AACA;AAAA;AAIA;AAEA;AACA;AACA;AACA;AAJA;AAYA;AACA;AACA;AACA;AACA;AAAA;AAAA;AALA;AAOA;AAAA;AAnBA;AA0BA;AAGA;AACA;AACA;AAHA;AASA;AAAA;AAAA;AAAA;AACA;AAAA;AAKA;AACA;AACA;AAHA;AASA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AA1BA;AAkCA;AAjIA;AACA;AADA;AAAA;;;;A","sourceRoot":""}