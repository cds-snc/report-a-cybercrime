 export PROJECT_NAME=rcmpcybercrime
 export RG_NAME=RCMPCDSCybercrimeRG
 export ACR_NAME=cybercrimeacr
 export IMAGE_NAME=cybercrimeimage
 export DB_NAME=cybercrimedb
 export PLAN_NAME=cybercrimeplan
 export APP_NAME=reportascam
 # Set up Azure
 ## Resource group
 az group create --name $RG_NAME --location canadacentral
 az configure --defaults group=$RG_NAME location=canadacentral    # set default resource group
 ## Container registry
 az acr create --name $ACR_NAME --sku standard
 ## Database
 az cosmosdb create --name $DB_NAME --kind MongoDB
 # Deploy code
 ## Docker image
 az acr build --registry $ACR_NAME --image $IMAGE_NAME .
 ## App Service
 ### Create
 az appservice plan create --name $PLAN_NAME --sku F1 --is-linux
 az webapp create --name $APP_NAME --plan $PLAN_NAME --deployment-container-image-name ${ACR_NAME}.azurecr.io/${IMAGE_NAME}:latest
 ### ACR access
 export ACR_USERNAME=$ACR_NAME
 export ACR_PASSWORD=`az acr credential show --name $ACR_NAME | jq '.passwords[0].value' | sed -e 's/^"//' -e 's/"$//'`
 az webapp config container set --name $APP_NAME --docker-custom-image-name ${ACR_NAME}.azurecr.io/${IMAGE_NAME}:latest --docker-registry-server-url https://${ACR_NAME}.azurecr.io --docker-registry-server-user $ACR_USERNAME --docker-registry-server-password $ACR_PASSWORD
 ### Environmental variables
 export COSMO_KEY=`az cosmosdb keys list --name $DB_NAME --query "primaryMasterKey" | sed -e 's/^"//' -e 's/"$//'`
 az webapp config appsettings set  --name $APP_NAME --settings COSMOSDB_NAME=$DB_NAME COSMOSDB_KEY=$COSMO_KEY
 ### Continuous deployment
 az webapp deployment container config --enable-cd true --name $APP_NAME

